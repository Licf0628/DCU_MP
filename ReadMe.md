# WWasm3

## 项目描述

WWasm3 是在开源项目 [wasm3](https://github.com/wasm3/wasm3) 的基础上扩展开发的 WebAssembly 解释器，旨在支持大数运算和国密矢量运算指令集，并针对海光异构计算平台实现矢量加速。项目通过优化 wasm3 的核心功能，利用海光平台的硬件特性，提供高效的 WebAssembly 执行环境，适用于需要高性能计算的场景。

本次开发的异构计算硬件平台包括高性能多核 HYGON C86 CPU 和海光 Z100 DCU（数据中心 GPU），结合国密算法支持，实现了在国产硬件上的高效计算加速。

---

## 功能特性

- **大数运算支持**：扩展 wasm3，支持大整数计算，适用于加密算法和数学密集型任务。
- **国密矢量运算指令集**：集成 SM2 等国密算法的矢量加速，提升加密运算性能。
- **异构计算优化**：针对海光 C86 CPU 和 Z100 DCU 的硬件特性进行优化，利用多核和 GPGPU 能力加速 WebAssembly 执行。
- **兼容性**：保留 wasm3 的原有功能，支持标准 WebAssembly 模块。

---

## 实验平台硬件环境

以下是 WWasm3 开发和测试所使用的硬件平台配置：

| **硬件**        | **名称**             | **参数**                                  |
|-----------------|----------------------|-------------------------------------------|
| CPU             | HYGON C86 7265       | 24 核, 2.2 GHz, X86_64, DDR4              |
| GPGPU           | 海光 Z100 DCU        | 4 张, 3840 流处理器, 1.25 GHz, HBM2       |
| CCP             | 海光密码协处理器     | 支持 SM2                                  |
| 内存            | DDR4                 | 256 GB                                    |
| 存储            | NVMe SSD             | 1 TB                                      |
| 操作系统        | Anolis OS 8.6        | 内核 5.4.19                               |

- **CPU**：HYGON C86 7265 提供 24 个核心，主频 2.2 GHz，支持 X86_64 指令集，为多线程任务提供强大的计算能力。
- **GPGPU**：海光 Z100 DCU 配备 3840 个流处理器，主频 1.25 GHz，使用 HBM2 内存，适合并行计算和矢量运算。
- **CCP**：海光密码协处理器支持 SM2 国密算法，加速加密操作。
- **内存与存储**：256 GB DDR4 内存和 1 TB NVMe SSD 确保高吞吐量和低延迟的数据访问。

---

## 构建与安装

### 依赖
- CMake（版本 >= 3.11）
- Hipcc (dtk-24.01)
- GCC 或 Clang（支持 C99 和 C++11）

### 构建步骤
1. 克隆仓库：
   ```bash
   git clone https://github.com/openwawa/WWasm3.git
   cd WWasm3
2.在VS中使用hipcc远程调试时，需要在launch.vs.json中添加调试字段：
	```bash
	"gdbPath": "/opt/dtk-24.04.1/bin/hipgdb", // 远程机器上的 hipgdb 路径
